<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Test Report</title>
    <link rel="stylesheet" href="default_style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function toggleGroup(groupId) {
            const groupContent = document.getElementById(groupId);
            groupContent.classList.toggle('hidden');
        }
    
        function toggleAllGroups() {
            const groupContents = document.querySelectorAll('.group-content');
            const toggleButton = document.getElementById('toggleButton');
            const isHidden = toggleButton.innerText === 'Show All';
    
            // Resetuje filtrowanie: pokazuje wszystkie wiersze i grupy
            const rows = document.querySelectorAll('tbody tr');
            rows.forEach(row => {
                row.style.display = ''; // Pokazuje wszystkie wiersze
            });
    
            groupContents.forEach(groupContent => {
                if (isHidden) {
                    groupContent.classList.remove('hidden'); // RozwiÅ„ grupy
                } else {
                    groupContent.classList.add('hidden'); // ZwiÅ„ grupy
                }
            });
    
            // Resetuje filtr na "ALL"
            document.querySelectorAll('.group-header').forEach(header => {
                header.style.display = ''; // PokaÅ¼ wszystkie grupy
            });
    
            toggleButton.innerText = isHidden ? 'Hide All' : 'Show All'; // ZmieÅ„ tekst przycisku
        }
    
        function filterResults(status) {
            const rows = document.querySelectorAll('tbody tr');
            const groups = document.querySelectorAll('.group-header');
            const groupContents = document.querySelectorAll('.group-content');
            const toggleButton = document.getElementById('toggleButton');
    
            // Ustaw przycisk na "Show All" jako domyÅ›lny stan
            toggleButton.innerText = 'Show All';
    
            rows.forEach(row => {
                if (row.classList.contains('group-header')) {
                    row.style.display = '';
                } else if (status === 'ALL') {
                    row.style.display = '';
                } else if (row.classList.contains(status.toLowerCase())) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
    
            groups.forEach((group, index) => {
                const groupContent = groupContents[index];
                const visibleTests = Array.from(groupContent.children).some(
                    row => row.style.display !== 'none'
                );
                group.style.display = visibleTests ? '' : 'none';
                if (status !== 'ALL' && visibleTests) {
                    groupContent.classList.remove('hidden'); // RozwiÅ„ grupy z widocznymi testami
                }
            });
        }
    
        function searchTests() {
            const input = document.getElementById('searchInput').value.toLowerCase();
            const rows = document.querySelectorAll('tbody tr');
            const groups = document.querySelectorAll('.group-header');
            const groupContents = document.querySelectorAll('.group-content');
    
            rows.forEach(row => {
                const text = row.innerText.toLowerCase();
                row.style.display = text.includes(input) ? '' : 'none';
    
                if (row.classList.contains('group-header')) {
                    row.style.display = '';
                }
            });
    
            groups.forEach((group, index) => {
                const groupContent = groupContents[index];
                const visibleTests = Array.from(groupContent.children).some(
                    row => row.style.display !== 'none'
                );
                group.style.display = visibleTests ? '' : 'none';
            });
        }
    
        function generatePieChart() {
            const ctxPie = document.getElementById('testChart').getContext('2d');
            new Chart(ctxPie, {
                type: 'doughnut',
                data: {
                    labels: ['PASS', 'FAIL'],
                    datasets: [{
                        data: [4, 2],
                        backgroundColor: ['#27ae60', '#e74c3c'],
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        }
                    }
                }
            });
        }
    
        document.addEventListener('DOMContentLoaded', generatePieChart);
    </script>      
</head>
<body>
    <div class="container">
        <h1>Responsive Test Report</h1>
        <div class="summary">
            <div class="item">
                <span>6</span>
                <small>Total Tests</small>
            </div>
            <div class="item pass">
                <span>4</span>
                <small>PASS</small>
            </div>
            <div class="item fail">
                <span>2</span>
                <small>FAIL</small>
            </div>
        </div>
        <div class="chart-container">
            <canvas id="testChart"></canvas>
        </div>
        <div class="progress-bar-container">
            <div class="progress-bar progress-pass" style="width: 66.66666666666666%;">66.66666666666666% PASS</div>
            <div class="progress-bar progress-fail" style="width: 33.33333333333334%;">33.33333333333334% FAIL</div>
        </div>
        <div class="search-container">
            <input type="text" id="searchInput" onkeyup="searchTests()" placeholder="Search for tests..." />
        </div>
        <div class="filter-buttons">
            <button id="toggleButton" onclick="toggleAllGroups()">Show All</button>
            <button onclick="filterResults('PASS')">Show PASS</button>
            <button onclick="filterResults('FAIL')">Show FAIL</button>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Status</th>
                    <th>Group / Test Name</th>
                    <th>Details</th>
                    <th>Additional Info</th>
                </tr>
            </thead>
            <tbody>
                
                <tr class="group-header" onclick="toggleGroup('test_group_2')">
                    <td class="fail">
                        <span class="icon">âœ˜</span> FAIL
                    </td>
                    <td>Test_Group_2</td>
                    <td>1 PASS, 1 FAIL</td>
                    <td>Click <span style="cursor: pointer;">ðŸ‘‰</span></td>
                </tr>
                <tbody id="test_group_2" class="group-content hidden">
                    
                    <tr class="fail">
                        <td class="fail">
                            <span class="icon">âœ˜</span> FAIL
                        </td>
                        <td>Test 2</td>
                        <td>Assertion failed! Expected value = 4, actual value = 51 </td>
                        <td>
                            
                                <a href="test_group_2_tests.html#test_2">Test Code</a>
                            
                        </td>                                                                    
                    </tr>
                    
                    <tr class="pass">
                        <td class="pass">
                            <span class="icon">âœ”</span> PASS
                        </td>
                        <td>Test 3</td>
                        <td></td>
                        <td>
                            
                                <a href="test_group_2_tests.html#test_3">Test Code</a>
                            
                        </td>                                                                    
                    </tr>
                    
                </tbody>
                
                <tr class="group-header" onclick="toggleGroup('modbus_communication_tests')">
                    <td class="fail">
                        <span class="icon">âœ˜</span> FAIL
                    </td>
                    <td>Modbus Communication Tests</td>
                    <td>0 PASS, 1 FAIL</td>
                    <td>Click <span style="cursor: pointer;">ðŸ‘‰</span></td>
                </tr>
                <tbody id="modbus_communication_tests" class="group-content hidden">
                    
                    <tr class="fail">
                        <td class="fail">
                            <span class="icon">âœ˜</span> FAIL
                        </td>
                        <td>Read Holding Register Test</td>
                        <td>Modbus error: Modbus Error: [Input/Output] Modbus Error: [Invalid Message] No response received, expected at least 4 bytes (0 received)</td>
                        <td>
                            
                                <a href="modbus_communication_tests_tests.html#read_holding_register_test">Test Code</a>
                            
                        </td>                                                                    
                    </tr>
                    
                </tbody>
                
                <tr class="group-header" onclick="toggleGroup('test_group_3')">
                    <td class="pass">
                        <span class="icon">âœ”</span> PASS
                    </td>
                    <td>Test_Group_3</td>
                    <td>3 PASS, 0 FAIL</td>
                    <td>Click <span style="cursor: pointer;">ðŸ‘‰</span></td>
                </tr>
                <tbody id="test_group_3" class="group-content hidden">
                    
                    <tr class="pass">
                        <td class="pass">
                            <span class="icon">âœ”</span> PASS
                        </td>
                        <td>Test 1</td>
                        <td></td>
                        <td>
                            
                                <a href="test_group_3_tests.html#test_1">Test Code</a>
                            
                        </td>                                                                    
                    </tr>
                    
                    <tr class="pass">
                        <td class="pass">
                            <span class="icon">âœ”</span> PASS
                        </td>
                        <td>Test 2</td>
                        <td></td>
                        <td>
                            
                                <a href="test_group_3_tests.html#test_2">Test Code</a>
                            
                        </td>                                                                    
                    </tr>
                    
                    <tr class="pass">
                        <td class="pass">
                            <span class="icon">âœ”</span> PASS
                        </td>
                        <td>Test 3</td>
                        <td></td>
                        <td>
                            
                                <a href="test_group_3_tests.html#test_3">Test Code</a>
                            
                        </td>                                                                    
                    </tr>
                    
                </tbody>
                
            </tbody>
        </table>        
    </div>
</body>
</html>